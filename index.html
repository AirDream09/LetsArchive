<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Lets Archive 0.2.2</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#0b0b0f;
  --card:#1a1a2e;
  --accent:#00ffcc;
  --accent-dark:#008f70;
  --text:#fff;
  --muted:#777;
  --header-bg:#111;
}

*{box-sizing:border-box;margin:0;padding:0;font-family:'Orbitron',sans-serif;}
body{background:var(--bg);color:var(--text);}
.hidden{display:none !important;}
header{display:flex;flex-direction:column;align-items:center;padding:20px;background:var(--header-bg);border-bottom:2px solid var(--accent);}
header h1{font-size:36px;color:var(--accent);margin-bottom:8px;}
header small{color:var(--muted);margin-bottom:12px;font-size:14px;}
header p{color:var(--muted);font-size:12px;text-align:center;max-width:600px;}
header input{padding:10px 14px;border-radius:20px;border:none;width:250px;background:#222;color:#fff;margin-top:10px;}

.grid{display:grid;gap:20px;padding:20px;}
.card{background:var(--card);border-radius:16px;padding:16px;cursor:pointer;transition:.3s;position:relative;display:flex;flex-direction:column;justify-content:space-between;}
.card:hover{transform:scale(1.03);box-shadow:0 0 20px var(--accent);}
.card h3{margin-bottom:8px;font-size:16px;}
.card p{margin:0;font-size:12px;color:var(--muted);}
.progress{height:8px;background:#222;border-radius:4px;overflow:hidden;margin-top:10px;}
.progress-fill{height:100%;background:var(--accent);transition:.3s;}
.back{margin:20px;color:var(--accent);cursor:pointer;font-weight:bold;}
h4{margin:16px 0 8px 0;color:var(--accent);text-transform:uppercase;letter-spacing:1px;}

/* EPISODEN-OVERVIEW */
.season-card{margin-bottom:20px;}
.episode-card{background:#222;padding:8px 12px;margin:4px 0;border-radius:10px;cursor:pointer;transition:.2s;}
.episode-card:hover{background:var(--accent-dark);}
.episode-list{display:flex;flex-direction:column;padding-left:10px;}

/* PLAYER-OVERLAY */
#playerOverlay{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.95);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:20px;
  z-index:999;
  display:none;
}
#playerOverlay iframe{width:80%;aspect-ratio:16/9;border-radius:16px;border:2px solid var(--accent);}
#playerOverlay button{margin-top:10px;background:var(--accent);border:none;color:#000;padding:10px 14px;border-radius:12px;cursor:pointer;transition:.2s;}
#playerOverlay button:hover{background:var(--accent-dark);}
#playerOverlay .back{align-self:flex-start;margin-bottom:10px;}

/* Zuletzt gesehen */
#lastSeen{padding:0 20px 10px 20px;}
#lastSeen h4{margin-bottom:8px;}
.last-card{background:#222;padding:10px;margin:4px 0;border-radius:12px;cursor:pointer;transition:.2s;}
.last-card:hover{background:var(--accent-dark);}
</style>
</head>
<body>
<div id="loginScreen" style="
  position:fixed;
  inset:0;
  background:#0b0b0f;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:2000;
">
  <div style="
    background:#1a1a2e;
    padding:30px;
    border-radius:20px;
    border:2px solid #00ffcc;
    width:320px;
    text-align:center;
  ">
    <h2 style="color:#00ffcc;margin-bottom:10px;">Lets Archive</h2>
    <p style="font-size:12px;color:#777;margin-bottom:20px;">
      Bitte einloggen
    </p>

    <input id="loginEmail" type="email" placeholder="E-Mail"
      style="width:100%;padding:12px;border-radius:14px;border:none;margin-bottom:12px;background:#222;color:#fff;">

    <button onclick="login()" style="
      width:100%;
      padding:12px;
      border-radius:14px;
      border:none;
      background:#00ffcc;
      color:#000;
      cursor:pointer;
      font-weight:bold;
    ">
      Login
    </button>

    <p id="loginError" style="color:#ff5555;font-size:12px;margin-top:10px;display:none;">
      Diese E-Mail ist nicht erlaubt
    </p>
  </div>
</div>

<button onclick="logout()">Logout</button>



<header>
  <h1>Willkommen bei Lets Archive</h1>
  <small>Version 0.2.2</small>
  <p>Change Log: <br> - Staffeln & Episoden klarer Layout<br> - Player Overlay<br> - Fortschrittsbalken<br> - Ninjago<br> - nächste Folge<br> - Swipe Navigation</p>
  <input type="text" id="searchInput" placeholder="Suche Serien/Episoden...">
</header>

<div id="lastSeen">
  <h4>Zuletzt gesehen</h4>
  <div id="lastSeenList"></div>
</div>

<div id="series" class="grid"></div>

<div id="episodes" class="hidden">
  <div class="back" onclick="backToSeries()">← Zurück zu Serien</div>
  <div id="seasonContainer"></div>
</div>

<div id="playerOverlay">
  <div class="back" onclick="closePlayer()">← Zurück</div>
  <iframe id="videoPlayer" allow="autoplay; fullscreen" allowfullscreen></iframe>
  <button onclick="nextEpisode()">Nächste Folge ▶</button>
</div>













<script>
const data = {
  serie1: {
    name: "Hidden Side",
    staffeln: {
      1: [
        { title: "Folge 1 - 9", id: "1RlnkPFXO_Ln7v4uR5QUb0Wy3FyQAtIOM" },
        { title: "Folge 10 - 20", id: "11cwu8AqOlgnnjAL7uZ0UKcQNvu4xTvy9" },
        { title: "Face the Fear", id: "1imw8nGMKsj0WpphpmOmjGCfWUov-42eB" },
        { title: "Night of the Habringer", id: "1X9eTHaUbuFQJmOziLB6lKKI40IK4GyxT" }
      ]
    }
  },



 serie2: { name: "Ninjago", staffeln: {
    1: [{ title: "Pilot", id: "1t7C34GGPcP65P3ThGmXj4pklUc_5ondX" },
    
      { title: "Folge 01 - Der Aufstieg der Schlangen", id: "1e2nN0EbtrTsIBlzP7vygK30tZ6e3WpXX" },
      { title: "Folge 02 - Der Pfad des Falken", id: "1wP05cdfBQ41uQ6IcOjv0Us_RfININ7gZ" },
      { title: "Folge 03 - Familienbande", id: "17il6fjhQokb0Uog9FMM5H9knNnv7uCZ3" },
      { title: "Folge 04 - Traue niemals einer Schlange", id: "10XLoLRBQEOrin1xBii3ijYt9TMD2BwNo" },
      { title: "Folge 05 - Die Vereinigung der Schlangen", id: "1btuDiUNcpb173vY4ibqknmHnEH6Tfm1I" },
      { title: "Folge 06 - Die verlorene Stadt", id: "1zTp67sOdVMc6m-EGChbxEqNmVWFWyTgz" },
      { title: "Folge 07 - Der Nindroid", id: "1dztrrjyVewOe0A1NTUDWsn74xutgkHCG" },
      { title: "Folge 08 - Die erste Reißzahnklinge", id: "1r6gPDSlf_puT3U29n2szD6EqeYb-d6nL" },
      { title: "Folge 09 - Der Talentwettbewerb", id: "1gWIaiLETNJnB5PgnGmbeALw-nO7mwqyl" },
      { title: "Folge 10 - Der grüne Ninja", id: "1Yw-66yhj3NaZChNmsEYqmeYiR53ZvotF" },
      { title: "Folge 11 - Die vierte Reißzahnklinge", id: "1WbWnIcxNnHM-Jlm59eb_13EjYUDM2iUD" },
      { title: "Folge 12 - Das böse Erwachen", id: "1UDnAEw84bl6_OtkB2zKz6fWShPXSFSXK" },
      { title: "Folge 13 - Rettung in letzter Sekunde", id: "1sICwlW9_0Qkx7LRXBSOeOVeAhX_f4lIH" }
    ],
    2: [
      { title: "Folge 01 - Finsternis zieht herauf", id: "1ZdxxYAiBy5HoJe93l5vjZMMrFUdGagbn" },
      { title: "Folge 02 - Piraten gegen Ninja", id: "1_yz41pRQ2ZmkAtQ5PMXhrDuqwLF7sGV6" },
      { title: "Folge 03 - Die falschen Ninja", id: "1KO4FMNjCjlXtVOzA7poEUGr4ZQbJnsov" },
      { title: "Folge 04 - Das Ninjaball-Rennen", id: "1jFwNNwFalph9Qmj4qpokLkPmemN3xySa" },
      { title: "Folge 05 - Wieder jung!", id: "1io2R-CZ-ixQJxkEsSfcQh80k8rYx6vDS" },
      { title: "Folge 06 - Die Zeitreise", id: "19FJ3vVmyeFjJSLm1HLiCWtc5bdmUwcO3" },
      { title: "Folge 07 - Lloyds Mutter Misako", id: "1ZCb8nE9BKMBhwIRizM6tmO6j8rftlelT" },
      { title: "Folge 08 - Die Steinsamurai", id: "1An3IsKjVVc5hnLz5J0HGUc_LfQMuvrMf" },
      { title: "Folge 09 - Die Reise zum Tempel des Lichts", id: "1Mh6Orm_6x89pzC8uDZ40GFbNJBS8zOqd" },
      { title: "Folge 10 - Der Tempel des Lichts", id: "1R-Zlr1M317bwpnHn_6QqqRoNoNTQWqxM" },
      { title: "Folge 11 - Die dunkle Uhr", id: "1ad-q_ceBFHtnM4BA5kENN7WGqT_UT9pc" },
      { title: "Folge 12 - Garmadons neue Maschine", id: "11A4UXSg1nkaMkml5Bf2IR8dHEOPmF2y6" },
      { title: "Folge 13 - Der Ultimative Spinjitzu-Meister", id: "1U-qbSpmjIaKjD9fiBfx_V-mNFVcz_kut" }
    ],
3: [
{title:"Folge 01 - Das neue Ninjago",id:"1fEICZXXU3fdYrOAsEXdHe9H9n2Vh88_9"},
{title:"Folge 02 - Die Kunst, nicht zu kämpfen",id:"1yV_S1S-kvGybyJKpKXthU9ruOuRymwum"},
{title:"Folge 03 - Das innere Gleichgewicht",id:"1fyNPHGCHU11j9iM71wYT23WCKzO_W3jC"},
{title:"Folge 04 - Die Legende des Goldenen Meisters",id:"1776hEUcW7A6aIhADtWi1_J1FqamqEhnW"},
{title:"Folge 05 - Die Computerwelt",id:"13LVi3Pw1Syo26Lzac62pOLXQkdb7vn2t"},
{title:"Folge 06 - Projekt Arcturus",id:"1q4BHTmCYxj9Dx9r-448DCdNWrtmVRfk1"},
{title:"Folge 07 - Die Ninja im Weltall",id:"1j4k8pooIlER8Rqr2DYKut_h2KiMudOSM"},
{title:"Folge 08 - Der Goldene Meister",id:"109slMfHhHg5iE5PhcgspgN0PqcPArx53"}],

4: [
{title:"Folge 01 - Die Einladung",id:"17tsn1xHA2iRkCyyqI3Pvp8GVDyKnxEZa"},
{title:"Folge 02 - Elementare Schwierigkeiten",id:"1GmfxSl2Z5a-sXCPkZBbb9yOMhM1hcC6J"},
{title:"Folge 03 - Kenne deine Feinde",id:"1WoxFkls8mygcpqlkufi6nGEugWtFkXNp"},
{title:"Folge 04 - Ninja auf Rollen",id:"1CnZMKsZpHU3xxyyDv0MHRh2E5_qFKJyK"},
{title:"Folge 05 - Der Spion",id:"1lnTldpJEioLaLMV93wA2LX4cbDyy-jdZ"},
{title:"Folge 06 - Die Geschichte der Anacondrai",id:"1FSEELPAzSIKjcCIIt2s_hNKYNd29ZyBT"},
{title:"Folge 07 - Das letzte Element",id:"1qIQYeW05-CSuXYYzn2yhzPIHkhFi7s-w"},
{title:"Folge 08 - Der Tag des Drachen",id:"17TF77SNp7QvDLYQdZeaB-24Ike15E4r_"},
{title:"Folge 09 - Hilfe von Pythor",id:"1akPC_Qz_hf239xf6U5D5-8zNVEr-47ni"},
{title:"Folge 10 - Der Pfad der Ältesten",id:"1AsqpG4ukZl_3M5NVZ5MCe1zFmi4qdmlT"}
],

5: [
{title:"Folge 01 - Stürmischer Wind",id:"1ofC0ZwYl1iLULZRcgcKCytY2mEFW3yRX"},
{title:"Folge 02 - Geistergeschichte",id:"1qUDO6d1ZzJVS2K9tNfBaKtr8eSyubCgE"},
{title:"Folge 03 - Die Stadt über dem Wasser",id:"11_xDRnUXMgKe-M2eIi2jeAEohmSJGPXC"},
{title:"Folge 04 - Sensei Yangs Prüfung",id:"1AF1Hnq6EIILKH88PtYQamrzCcHuSrmIg"},
{title:"Folge 05 - Zyklon-Go",id:"1yXBtKWT7KSisNpK8ypQ--ZyN397xN3w1"},
{title:"Folge 06 - Das Schwert der Prophezeiung",id:"1__3Je7n9qAHh0NR-hqrim8cel8jAf9Re"},
{title:"Folge 07 - Falsches Spiel",id:"1VSNfbVi-9Ww185hPD1eRO137nREFqNpa"},
{title:"Folge 08 - Die drei Prüfungen",id:"1VZI3XWmELsXkbcK61FIEzJhhfIeON-se"},
{title:"Folge 09 - Der Weltenkristall",id:"1j_yJEPz8JNg_XeTQVTsmoz0iYfI92GIn"},
{title:"Folge 10 - Die verfluchte Welt",id:"1rrglpFuZA-H4YCyxcSdkET18kcE1AfHK"}
],

6: [
{title:"Folge 01 - Der Geist aus der Teekanne",id:"1xNAaW1oP-8WZddJBFdynjJK7Ruq1a8fA"},
{title:"Folge 02 - Ronan auf Ninja-Suche",id:"1OUjBpISeI-8mQH3EcXCm4y9LgqbXRRjT"},
{title:"Folge 03 - Das Vermächtnis des Dschinns",id:"1XNfSqRMk33iJsIDVDAVUW_O-nocbkFhk"},
{title:"Folge 04 - Das Luftschiff des Unglücks",id:"1Jwh3d7sLu7NFCAievISlqm2-wU4BqXy7"},
{title:"Folge 05 - Das Gift der Schwarzen Witwe",id:"14K87cmpiy0XvqeC9xbRsCyC-wU77CJBq"},
{title:"Folge 06 - Nadakhans wahrer Plan",id:"1zsq1tQRw8-i0pJAVUyeZAIEg-k8Zk6QR"},
{title:"Folge 07 - Wunschverschwendung",id:"1XWU_dlVDyMnQKeQ0PsQYXPjFeZJe47a5"},
{title:"Folge 08 - Der alte Leuchtturm",id:"1SjZzdrvVUyySOH2Ls9pKSKaZbVmfPgM-"},
{title:"Folge 09 - Das Ninja-Ersatzteam",id:"1VDOAWSLT13v4yUei6J9M5nKaN6HchRfJ"},
{title:"Folge 10 - Der allmächtige Nadakhan",id:"1yMTLoRZpiCVpipQBOunGM5FcmFKVUhRv"},
{title:"Tag der Erinnerungen",id:"1KcViHfXi1PFw5KNA0dMbOxIwrC3_DzoC"},
{title:"Tales of the Crew",id:"16i-_YNI4ujCM5Q6QlNd-dsBdNIpXgFmY"}
],

7: [
{title:"Folge 01 - Meister der Zeit",id:"1iG6i4TAvqPJp_YaqPUiVwyw9TT7snUCs"},
{title:"Folge 02 - Das große Schlüpfen",id:"1VvVZaDp3RSlwDetd0Vjh9fYGDF5mlOT0"},
{title:"Folge 03 - Geschwister",id:"1PGwgWjbN95Cec1hVOjAhmELw9nJbvEfX"},
{title:"Folge 04 - Metalldiebe",id:"1b5m3aTys_kmbhe3nYBJteJLy67j9NfZZ"},
{title:"Folge 05 - Die zweite Zeitklinge",id:"1ZufJVlAlWs_PNV9yq136dIbMzi4Sdj2T"},
{title:"Folge 06 - Im Siegesrausch",id:"131PjHsLonVxK4Q5mYAgDFDLmhpZhtIz-"},
{title:"Folge 07 - Jede Menge Geheimnisse",id:"1JvNCJeei7jALYs_8C277cihEyZieKCt7"},
{title:"Folge 08 - Das Familientreffen",id:"1T-iNH7hhKekR7LFW5rJ3YRZXN9aSoYiC"},
{title:"Folge 09 - Zwei wie Feuer und Wasser",id:"1NdwLocz-9uMHtXIWo6YD1aAvRuJjX5ha"},
{title:"Folge 10 - Reise in die Vergangenheit",id:"1rszBFkrdOIpvQ2ryfWA46IhTCcNAZ1sj"},
{title:"LEGO NINJAGO MOVIE",id:"1U3t8iTk3RkAwHy1sJA1-rE6e4yx8Z_2z"}
],



8: [
{title:"Folge 01 - Die Maske der Täuschung",id:"11JQupRH9Ga6sipN-m-TV5Zl8g7sUnVbb"},
{title:"Folge 02 - Prinzessin Harumi",id:"1JFTOhhVaBXcb4xQxNzasMwo2ZziURJ4S"},
{title:"Folge 03 - Die Oni und die Drachen",id:"17xEVSfsPm72S43x-po_eNKFjINCcmhIS"},
{title:"Folge 04 - Jake Schlangenschleim",id:"1aeFrC7aUE-oGV_e--tov5fH83Va4guJU"},
{title:"Folge 05 - Die Ruhe vor dem Sturm",id:"1AAJYVc7MqoCWZnPo9LAPLugblgOIOnrR"},
{title:"Folge 06 - Im Auge des Urwalds",id:"1UOM6-dOwrnHPwvVqhMBgNtF_qmq8J98U"},
{title:"Folge 07 - Die dritte Maske",id:"1CHIoKbGSC78HOoKxB7x74gD4ISG-EdLP"},
{title:"Folge 08 - Die Zeremonie",id:"1rPMvJHmkSLn-Kk9gdqoCizBvIrwySZmv"},
{title:"Folge 09 - Die wahre Macht",id:"1lZyg9hOdII-6G51OtGh7iIG2yTqAOpYE"},
{title:"Folge 10 - Kleines Ninjago, großer Ärger",id:"1AGc1fnEioU2KpMhdouR-SqMjjhxtvT-M"}
],

9: [
{title:"Folge 01 - Gib niemals auf",id:"1005jOI3H_4wgn4SRJCY5n-SKYj745vyQ"},
{title:"Folge 02 - Bei den Drachenjägern",id:"10XOy2_dLtgZBthBRTHCO_UCEz-vtP7bU"},
{title:"Folge 03 - Drachen anlocken",id:"1lzVq_mC5Sle9MDOXur_rRBrLB3Db57eQ"},
{title:"Folge 04 - Wie man einen Drachen baut",id:"11XuanIekogtVNNo12yEcQrTgcHGBhJFj"},
{title:"Folge 05 - Vertrauen",id:"1OwZ5gPEa35jYdUJ2zSeF_4zp2G9bLkhS"},
{title:"Folge 06 - Das Oni-Land",id:"1mlFBOOErlGtuN5ZJc36g2yuryeHGwCs8"},
{title:"Folge 07 - Die doppelte Harumi",id:"1KpOb61CHfpLXfVqzGTJwZ_Xy810uFrLa"},
{title:"Folge 08 - Die Lügen des Eisenbarons",id:"1hus_Oor3ukVSRd38NDetFtP8D6OH_tY9"},
{title:"Folge 09 - Das Drachennest",id:"14wfT6km_dRjDdMtzQ0ogkjDI0zqR6pAW"},
{title:"Folge 10 - Lloyds Kraft",id:"1lRNdIQtIY6QFvGvEygM6hSJ63f1028Z3"}
],

10: [
{title:"Folge 01 - Eine dunkle Gefahr",id:"19QdWCmHUEtsiC0_eSeh4I9LyOQjadrbQ"},
{title:"Folge 02 - Zusammenarbeit",id:"175e4K60kz93puo-HG9M71hOLJ0ZjNS0R"},
{title:"Folge 03 - Der Sturz",id:"1MIdV7H64zIEjYLPZ9ucbaMFzYg8chbua"},
{title:"Folge 04 - Der Tornado der Schöpfung",id:"17nLZ3tcl3RPx2GecRBR8LZDu-HIVVTYz"}

],



} 
},


  serie3: {
    name: "Monkie Kid",
    staffeln: {
      1:[
        { title: "Episode 01 – Ein Held ist geboren + Schlechtes Wetter", id: "1lLHhcnIGbMsMHuZbwVyaK5uZ9H0ADdjx" },
        { title: "Episode 02 – Klon-Land", id: "1Pn0ROqQaabH4eckhygVEavpX9SdO5uK" },
        { title: "Episode 03 – Zuhause", id: "1oO8CdGUUdzqzflOvvPhwxeNP_DFjUx98" },
        { title: "Episode 04 – Nudeln oder Tod", id: "1Xy_QoT0f7MH2QJnMIqxPlDEqG89iZhBS" },
        { title: "Episode 05 – Kalebasse", id: "1pTjIccyUPfiEfPdoFBFZ471mqO4DAULy" },
        { title: "Episode 06 – Das Große Rennen", id: "1gQpYeA7Y9SwSMUHJ3JMYgJA62xZ8YFbG" },
        { title: "Episode 07 – Unmögliche Zustellung", id: "1MTHO4SX9xeXgLgrphy0KkDthkXO7X7MZ" },
        { title: "Episode 08 – Skelett-Schlüssel", id: "19ZGo71sl9-uoirUDcCIsgoJvGG70o0rh" },
        { title: "Episode 09 – Makack", id: "1_KkJrGAU9giDgX2kADtJetjvuc6N2Z3G" },
        { title: "Episode 10 – Das Ende ist nah", id: "1zK4a2BqRtnUbydlClKu33WWjown0a2ZB" }
      ],

2: [
{ title: "Special 02 – Revenge of the Spider Queen (English)", id: "18un9XTtzF02p9S3KXDNPBEJCbByy78WI" },
{ title: "Episode 01 – Der Schlaf-Virus", id: "1xj5zdK7C_31jOLfRZqz3vEyoHtaSqYxR" },
{ title: "Episode 02 – Zerstörerische Teigtasche", id: "1l69Z4gt0QAMeaHF6xw5XMfPLQYYfNrGr" },
{ title: "Episode 03 – Pig Pong Panik", id: "16_rK4BVZyfpyEttviG91veEmFaW8QCkL" },
{ title: "Episode 04 – Süß-Sauer", id: "1hPEYiYYf05XLMDPC0P8-f5Bvw27_LCf2" },
{ title: "Episode 05 – Kleines Maß", id: "1ExqFJ8CvApdhp0wHCYZTx-dQvhMle2eA" },
{ title: "Episode 06 – Spielstart", id: "1FTrBEJ0RF5BchTkBbG85vpRolhVImaTu" },
{ title: "Episode 07 – Schattenspiel", id: "1mrpOKlEH_tkKNEaEq3IunaKklI6OkyXL" },
{ title: "Episode 08 – Ein Tässchen Tee", id: "1BWrHw0u1ne440MrFAPEJxNVmfZTXt3Lg" },
{ title: "Episode 09 – 72 Transformationen", id: "1ow-BtymhFBwS84bWZXw4zsQZP0eDGX_1" },
{ title: "Episode 10 – Das ist das Ende", id: "10Wl3AAdAL3dFcLiAlRpvtTlFA0xfJyth" }
],

3: [
{ title: "Episode 01 – Auf der Flucht", id: "1YtrJujbfyGIHT5ytAUibHtb0oMWCL5dp" },
{ title: "Episode 02 – Das Unterwasserabenteuer", id: "1hbGY83DEnZrglvVP4OvCOeYlzSKJnheD" },
{ title: "Episode 03 – Kluges Kind", id: "1vqVYWbR4fPCp6oY9uveIzpxHmmpeZ2jm" },
{ title: "Episode 04 – Die Seite des Gewinners", id: "10-xjdm1MspsejAmD63ilAFfWolaONxIK" },
{ title: "Episode 05 – Amnesie Regeln", id: "11pu5vgXlKQmyVPrHXkzToCf_9YKLXEhB" },
{ title: "Episode 06 – Der erste Ring", id: "12nki-6OCM_IdfDbzKB_jnedR9tN5dwsU" },
{ title: "Episode 07 – Die Kochshow", id: "1hfG1RR6qZFYPZKAPJINOO5KuXjYCoVQ_" },
{ title: "Episode 08 – Ausgeschlossen", id: "1hlqTYwFDPZoHL5B2qvpOym7oFxy4p-ZM" },
{ title: "Episode 09 – Der König, Der Prinz und der Schatten", id: "1WDVn7mtFgMKuRTG7IopdxdIRDYLkSQac" },
{ title: "Episode 10 – Das neu entfachte Feuer", id: "14OLyzeQ_XKXqPJAjbftZWkLaOnRN5otX" },
{ title: "Special 03 – This Imperfect World (English)", id: "1suiTnYw1Az_YGAHwp29XO1WG9h_H-l8N" }
],

4: [
{ title: "Episode 01 – Familiar Tales (English)", id: "1NLZd6t9dEh_fPa_HBNLjmpD2YKj6-Ido" },
{ title: "Episode 02 – New Adventures (English)", id: "1J53TxDfL4SLQQ6j2eWdga2dps-DYwJcj" },
{ title: "Episode 03 – The Great Tang Man (English)", id: "1n2W4HHeWupwgN62bMSXhtaM5toAl_Zit" },
{ title: "Episode 04 – Pig-Napped! (English)", id: "19MiknVMK4EL5xx-ROgjDnfYpBRU491OH" },
{ title: "Episode 05 – Court of the Yellow Robed Demon (English)", id: "1hZl7-LxikH5vLcvyP0cQDsG0PiBIiTTb" },
{ title: "Episode 06 – Show Me the Monster (English)", id: "1hs7SOPYgB24DZQQstfdOTjvuqmCL1KL0" },
{ title: "Episode 07 – Pitful Creatures (English)", id: "13IneG9rLDSnH9LMCVPM1GIWSUIQKPrZt" },
{ title: "Episode 08 – The Brotherhood (English)", id: "10EssIXuE5Fjpk0MD2Dd3aQwoihZbK50D" },
{ title: "Episode 09 – Roast of the Monkie Kids (English)", id: "1Bonp-IUfCIaPGxoGfDz4GFJUOmquhyic" },
{ title: "Episode 10 – The Jade Emperor (English)", id: "1vqKBfKqdZlRm9VNjHEizRXMkILN3t0zl" },
{ title: "Special 04 – The Emperor's Wrath (English)", id: "14ucvREGgEUNd0s_4isR4sRK8KrJuZ6PM" }
],

5: [
{ title: "Episode 01 – Stings That Bind (English)", id: "1gxW0_57jhMefj_SuK3KzkPpjYD47dzCR" },
{ title: "Episode 02 – Collar the King (English)", id: "1Y9RFblL_rHWT9Pu4PndRZctGd1oBP_Ij" },
{ title: "Episode 03 – Temple of the Goddess (English)", id: "11VQQwJdlOYYQtpeoT9K3qi2Jg_FCZ2pr" },
{ title: "Episode 04 – The Storm Within (English)", id: "1xSRApVZwZ6FDY8X3jDJQioRH-_Q4xeKe" },
{ title: "Episode 05 – Claim to Flame (English)", id: "1m7C3gO0aB-14vEG2kDENfDrmzI61W49s" },
{ title: "Episode 06 – Festival Flugitives (English)", id: "1UPdPbnwU4H3w9EExauhBlQVjeWVWdcnV" },
{ title: "Episode 07 – Into the Pagoda (English)", id: "1ARTVI7pAmVYDHU2QmTplw-UA0qBELJzq" },
{ title: "Episode 08 – The Cage (English)", id: "14dvBu7MQTDDzDItg9n_ul3uLkoX1Myn9" },
{ title: "Episode 09 – Sacrifice (English)", id: "1ZHmWL5hko2QqyrlxDYuVduFNhsxLpdZw" },
{ title: "Episode 10 – Harbringer (English)", id: "1JHtN4V9Ryyy_NvY_zYO-fM8I6kAjs2S9" }
],










    }
  },

 serie4: {
    name: "Regular Show",
    staffeln: {
      1: [
        { title: "Episode 01 – The Power", id: "1THedfIzzK334h4dWjbovN3JDuR_Wpqy-" },
        { title: "Episode 02 – Just Set Up the Chairs", id: "1vwC8O0J1Tvtk4WUCfSrqEJIpBSCC7gzi" },
        { title: "Episode 03 – Caffeinated Concert Tickets", id: "1rfm4VkX22jbG7bXS1npgi_3Hv__MJQ3x" },
        { title: "Episode 04 – Death Punchies", id: "107R6Bcu1Q66yB0L1LzbdofVEwW1dVXH6" },
        { title: "Episode 05 – Free Cake", id: "139qouI-YGgy2IqEAp28wQLVxOPafPNf2" },
        { title: "Episode 06 – Meat Your Maker", id: "1VXB4h8LyZnfTvXJfzmbgA2cFEM03G_7P" },
        { title: "Episode 07 – Grilled Cheese Deluxe", id: "1tmNTqg8fYjUYSQgwgezDC7J2N-zGtHKB" },
        { title: "Episode 08 – The Unicorns Have Got to Go", id: "1GQyJc3sueMGG_CTtYgQ9ZiI1-rt8Brz-" },
        { title: "Episode 09 – Prank Callers", id: "1BGghG446wYIVHHrA-Cy_fkdU1yxh1sW0" },
        { title: "Episode 10 – Don", id: "1DM9fpYtAxUlzTCkwTo2GQiQQ2ugOk4p-" },
        { title: "Episode 11 – Rigby's Body", id: "17XLQbfb_Ron4jICvDzf6svMWx0yapOQU" },
        { title: "Episode 12 – Mordecai and the Rigbys", id: "1M1Is239Rbw7OPo1rBqKiX_mNezsWua7T" }
      ]
    }
  },

  serie5: {
    name: "Chima",
    staffeln: {
      1: [
        { title: "Folge 01 – Wie alles begann – Teil 1", id: "1wXankN5Fg_Ntbzt0qFJQh9r9sO80Gxw5" },
        { title: "Folge 02 – Wie alles begann – Teil 2", id: "1hmmA90pqYotCfxtfTEbUFyuU4mMvzw7b" },
        { title: "Folge 03 – Hindernisse", id: "15PU4-ZtFeg8NWWDbQINZ89eZlPKhNG9P" },
        { title: "Folge 04 – Der Ausflug", id: "1ifeGZPZpvKvqYXQAT-4E2X2g4kDq1-vu" },
        { title: "Folge 05 – Markttag", id: "1E7ahU_JvNLOgyqTciuMHg1xzlNAE6Cho" },
{ title: "Folge 06 – Das Heiligtum der Wölfe", id: "10iCxfwuBf0gN6D-rM2UQkAShOm394HML" },
{ title: "Folge 07 – Der Hundert-Jahre-Mond", id: "1PZWUssPCm5Os1FZSkLtURvz_uZEK3RLt" },
{ title: "Folge 08 – Das große Rennen", id: "1CQa4bkkX2i7yGpoBJbZ3q9y5PHEgZX-S" },
{ title: "Folge 09 – Gorillas außer Rand und Band", id: "1iBqDPztxuxTgBqIm6oTuQtlKFv-cLsvw" },
{ title: "Folge 10 – Das Renn-Chaos", id: "1j_x91xQCHzZ8cKncyaFQUS-P-UepaEI3" },
{ title: "Folge 11 – Hilfe von Shadow Wind", id: "1rFZcvBf5RzGZpzJso6NBPw5ZnAf5oOZK" },
{ title: "Folge 12 – Ungleichgewicht in Chima", id: "1Vjd9w3T5SltiSiN7k8RcNVGH8extt2sr" },
{ title: "Folge 13 – Ausgetrickst", id: "1MVPO_B7zFeLBhSjQvwlA528jLyBAKscR" },
{ title: "Folge 14 – falsche CHI", id: "1oyeFogKM0WizpnC9beGoDcBuKOaS5EeT" },
{ title: "Folge 15 – Diebische Raben ", id: "1ONuRLUE6TeVtvWytE9qABVckVD3ghymQ" },
{ title: "Folge 16 – Friedensverhandlung", id: "1oRyBob6TpgtVvn7TAHDzaSstyFdZ5gXM" },
{ title: "Folge 17 – Verstoß gegen die Regeln", id: "16N6MUQtgb3Q8ZlS5iWNsXm_ubVqqtbjr" },
{ title: "Folge 18 – Die schwarze Wolke", id: "1OEd5Xw6maJvwcQwyFOI90aucU8PpSiyN" },
{ title: "Folge 19 – Der Lebensberg von Chima", id: "10kegql9AYpNz-WtXXG24mFI_FX6enVhv" },
{ title: "Folge 20 – Für Chima!", id: "1O6r4H8vTihJKcLAnF_92aN2zt_wrbEfY" }
      ],

2: [
{ title: "Folge 01 – Ausflug ins Hinterland", id: "1AGRw2SEcb1YJz-Bo9MHRl_v1pAt_IfmF" },
{ title: "Folge 02 – Gefangen im Netz", id: "1DyNrFcw4ZCw03GQuhXEeS_xAOV5sJCPM" },
{ title: "Folge 03 – Das Geheimnis um Shadow Wind", id: "16pXKkcG529dHJxM1P5rvoVNcRWh2aKXd" },
{ title: "Folge 04 – Schlafwandelnde Bären", id: "1k6ahtEJDt13fZjhpZ6ZyZheumvMMbjey" },
{ title: "Folge 05 – Lavals Geheimnis", id: "1yOToQw-4C42mvPmPwKOo896_UrMlQKks" },
{ title: "Folge 06 – Die Befreiung des Legendären Löwen", id: "1x29-bzuP25-pPAqwr-6j-DBHPiDIJFlt" }
],

3: [
{ title: "Folge 01 – Feuerflügel", id: "19wOQ8Lw4-OX94-Z80sULGAkxCQPGdF5O" },
{ title: "Folge 02 – Die Jäger der Eiszeit", id: "1XAFXi2LJslEBCiGx8P0Qujt9Om1UP3be" },
{ title: "Folge 03 – Die Rückkehr der legendären Tiere", id: "1IOrXtzZ3c4JWmtRZnKNCenD0Xrpfsyl1" },
{ title: "Folge 04 – Die Feuerprobe", id: "18rIdP2UksEZ30n7XAqWRafT6k-zXKH_i" },
{ title: "Folge 05 – Der magische Hügel", id: "1Mk4NJuSa6G7324CculgwM8XPa0CAM87R" },
{ title: "Folge 06 – Babysitter für Flinx", id: "1UH0lrFaG4K-Z5d-J6K5zNgVD0UiuJC2_" },
{ title: "Folge 07 – Der kleine Feuer-Vogel", id: "1bHN-ccsU17qNH2xNa1x56NbOjy-PU6A7" },
{ title: "Folge 08 – Die Tunnelkatze", id: "19EKcmnD4xdz7_YPzIQg2BmdX0RyIN0S3" },
{ title: "Folge 09 – Königliche Angelegenheit", id: "1ox4GFff5kO5RM-2Rj8jHV3kxaVvUfl1N" },
{ title: "Folge 10 – Die Gletscher-Falle", id: "1z5lnNbwhp3wkeJR7dBYEfD3s_6F2ji1z" },
{ title: "Folge 11 – Die legendäre Chima-Karte", id: "1cTM0buOJX8YXlwsFpjKIEJU_9bvyf8TO" },
{ title: "Folge 12 – Die eisige Schlucht", id: "1uqvPlCzioZBrcaBdUEBpNE-K8w18zjJi" },
{ title: "Folge 13 – Ein Funken Hoffnung", id: "1jr51vYagHug0K6EAznS46ZuxM_z9-3Js" },
{ title: "Folge 14 – Die Feuerflügel", id: "1Hs4Hb_k83S9q5FdhEdcZfFnJE5omYDQD" },
{ title: "Folge 15 – Das Feuerflügellicht", id: "1dS1E3BwPMA5irKNu8nZtQWKyvTR5WA5G" },







]


    }
  },

serie6: {
name: "Nexo Knights",
staffeln: {
1:[
{ title: "Folge 01 – Die Abschlussfeier", id: "19OfPmtWjpxbUuCrQW4-_gvj4MM_VZBBo" },
{ title: "Folge 02 – Der verschwundene Zauberer", id: "18JWfPK7aZqNHpTRm25BUKn2VTWgqVOOe" },
{ title: "Folge 03 – Die vereinten Ritter!", id: "1ztapiIwFFlwsEl6rlZuZPsF8Wg2GM_IE" },
{ title: "Folge 04 – Der Ritter-Kodex", id: "1_NhAnnN7vvecm0Pel6oqcOnPPOEofUUs" },
{ title: "Folge 05 – Jeder hat mal Angst", id: "1wdchrEr_3qGMvRZNbnkqTD6-DgPOjhv7" },
{ title: "Folge 06 – Filmstar", id: "1E7_Ix0qnO3PtCYD_qvxczmX_PHc0UciV" },
{ title: "Folge 07 – Das Labyrinth der Täuschungen", id: "14OAJvTvmtAnTWTf-8Sp1YTeloxwQVlqX" },
{ title: "Folge 08 – Der Schwarze Ritter", id: "1bULR_v_Qy7Yk9BFs2TTehzNcq8SRm8Au" },
{ title: "Folge 09 – Jestros listiger Plan", id: "1Onmqs1i0q4xXJx54SqkXEt2OPeJiwbY7" },
{ title: "Folge 10 – Die Königsburg in Gefahr", id: "1mjvVbTU_K7BRQjkcqMh5wPEWzNvoQ0YF" },
],

2:[
{ title: "Folge 01 – Zurück in die Schule", id: "1hPTnI9SgdTvRSwoJBtxOi343zBt6pbYK" },
{ title: "Folge 02 – Gold und Gier", id: "1P-V3N_CLToj9gg98vNqE5cLH2xbPxGz7" },
{ title: "Folge 03 – Das Comic-Heft", id: "1hpKtUI6kBRccSVRX1hJcqIpV7VEnS2Vt" },
{ title: "Folge 04 – Das königliche Geburtstags-Turnier", id: "1_trS0mJFE23c5e3I-1WuZN7i9SbHwY49" },
{ title: "Folge 05 – Monstermässig scharfes Chilli", id: "1tmUq21bmV9J8jd7nuEfOL9gCr70xln0I" },
{ title: "Folge 06 – Ein Urlaub für Clay", id: "1IZW88bO79k1echdL-xSsPMd1Q5GBP-B8" },
{ title: "Folge 07 – Willkommen in Schniefhausen", id: "1SlVK9gmpK80JkgCeoV2zplsHEA-vUjHF" },
{ title: "Folge 08 – Jestros großer Auftritt", id: "18q7RLx-4tn0-xEuouqITWyw_TdT5dXDA" },
{ title: "Folge 09 – Das letzte magische Buch", id: "1BFUUwl2VBIreU2hh4bWmf0J5QLRqsl_M" },
{ title: "Folge 10 – Eine böse Show", id: "1pRm_vvNlqnpVMFMpNsXzHPhDkVzBfc-s" },
],

3:[
{ title: "Folge 01 – Die Wolke", id: "1HjKLid8D24EyZx0WmN5xIvBYHOq_khb6" },
{ title: "Folge 02 – Ganz schön rostig!", id: "1_fAqzuliiK0SwwHD5dbRI2K9JKoZ_2O6" },
{ title: "Folge 03 – Die Verbotenen Kräfte", id: "1oyYZZGH5BnCNFdB30Gj0ttBRwPARQHdf" },
{ title: "Folge 04 – Ein fauler Zauber", id: "1_z6EBVnU78PjIH8cLkZdKuIDG5q7Kk6u" },
{ title: "Folge 05 – Ärger im Steinwald", id: "1xNkYc7wOL1QSUtx2wRMGHqaHAecRi5AG" },
{ title: "Folge 06 – Die drei Brüder", id: "1wOiRT8XbaVeRS-WmbpG8LxhyJELr1yYs" },
{ title: "Folge 07 – Monster im Museum", id: "1xsxrqzcpq44gIbKnc86c0f12ZJE8ZciM" },
{ title: "Folge 08 – Gute Monster, Böse Monster", id: "1WQO0rc5AGkpxM1QFTXoHPxRqbnWrwNez" },
{ title: "Folge 09 – Die Entführung der Königin", id: "1Uyz3T0BtDH3MJapn0jPFE3zA5PpFYrjQ" },
{ title: "Folge 10 – Der neue Anführer", id: "1DALxUJslsjh1wIaTeaiBYe8wCuuuQlSw" },
],

4:[
{ title: "Folge 01 – Der Schulausflug", id: "1e4rdv6BpLDBDX_hOmCbOW5rPwVl8h5z8" },
{ title: "Folge 02 – Der Graue Ritter", id: "15qHVQf0klxmZZ_Qzzl8Oy8tzJ-65_Aik" },
{ title: "Folge 03 – Halunken Clay", id: "19gJpCbd3hS-_UuiJhz_8-BgMytGzvVS-" },
{ title: "Folge 04 – In geheimer Mission", id: "1r7F58PYBkiBNzQsPJ1k23ksAmLh9uFU-" },
{ title: "Folge 05 – Der Fremde aus den Bergen", id: "14leSAE1etmMNYfV-Hq6TYpo-SqpUp9i_" },
{ title: "Folge 06 – Herzog Krakenkopf", id: "1AopKWi1CllC2xn-R1pIzlo4nDLsCAL1U" },
{ title: "Folge 07 – Clays große Wut", id: "1CygiErEIwq-WuordtY7hQ0o7yV_eQiro" },
{ title: "Folge 08 – Der Steinkoloss", id: "1eTDoePMylkaeyMUVM3QTq0GGH30qqpfR" },
{ title: "Folge 09 – Eine kolossale Gefahr", id: "15iR3iq7N57wfcd8IWhzLIqXIVwXSaTLR" },
{ title: "Folge 10 – Der Fall", id: "1FHgjxvolbWpsQXZItLefx9inCJI7M1BM" },
],

}
},


serie7: {
name: "Jade Armor",
staffeln: {
1:[
 { title: "Folge 01 - Das Geschenk", id: "1jV0STZ9ZmmRmBJqy0_X1XC2k-r729oro" },
{ title: "Folge 02 - Das Chaos", id: "1iZ8YW1PHyIsvOnLzWcZUi0Tks7TS6f1F" },
{ title: "Folge 03 - Das Gespräch", id: "1qIY_DtR9GVl94DFOGqf7hR91U6o2KiBg" },
{ title: "Folge 04 - Die böse Doppelgängerin", id: "1No53sSjIfYa1WzZjlX-LgfGvXTHPBKbM" },
{ title: "Folge 05 - Wildes Ban Tang", id: "1VPNpz4TbDHmk8jBc7OWbX4eWPVFpgyRn" },
{ title: "Folge 06 - Die Würfel sind gefallen", id: "1uwtFvm3VylUnaeBdPfe1Q0I5svgwXO38" },
{ title: "Folge 07 - Marionetten", id: "1rwm8tXlxJvd1wxESr0AnU4pUmvXS5TQE" },
{ title: "Folge 08 - Vergeben und Vergessen", id: "1AgyjARDnRsAt2Z5Cr7L6-4s7-nIDHhS1" },
{ title: "Folge 09 - Sag kein Wort!", id: "1KYReWCH7L5Y8VuKHDtuQ3BDFPrefxUC0" },
{ title: "Folge 10 - Xinyan der Große", id: "1SodGPRwy6N7Tlr-onv1F0h8XIu5J9f8h" },
{ title: "Folge 11 - Kais dunkle Seite", id: "1XlyCP_L-iB7EGENnbc2w-6fnbo3fUkz" },
{ title: "Folge 12 - Das Körpertausch-Chaos", id: "1k-EhitQMtcpqltw-fcGU0NPtQfqVVIeR" },
{ title: "Folge 13 - Das funfte Beasticon?", id: "1u20TGeB9LkoK3KBkrGFU_HFqiV3JN2Hu" },
{ title: "Folge 14 - Der Fantasie-Schlüssel", id: "1xlOJ61h9kMTz3_OXM3b-rATx_tyUvAf9" },
{ title: "Folge 15 - Das Parfüm", id: "1Ot5gnVGgAMGlxfvDIO5L_QHuqTFzrKS3" },
{ title: "Folge 16 - Alle lieben Jade", id: "1hRZrR4zag4IpDgc-OQ0oKbCevEvXLWd8" },
{ title: "Folge 17 - Der Beastibot", id: "18-aI4coxFS9pYvBt6wP_UtlOUHzbGaF3" },
{ title: "Folge 18 - Der Granatapfel", id: "1jhRHDJ1S6fwq9Eg7sd0KhqGPblW1ZpA5" },
{ title: "Folge 19 - Der Grüne Blitz", id: "1xMen0IVosgs7Plte9s675aRbh9vSXefH" },
{ title: "Folge 20 - Der Faden", id: "1Lcls_BY9bgMXJ933Ve3nTK2LqNHhP9WN" },
{ title: "Folge 21 - Der Filter", id: "1-4gdke32uWi7ytCwjsAGcLPSygsPzp9-" },
{ title: "Folge 22 - Filmchaos in Ban Tang", id: "1l7VfXD7c5RiMlFXKBe66c_EGTT-cGQxd" },
{ title: "Folge 23 - Durch die rosarote Brille", id: "15G2Hamhn71M8M6uPYZmJ7sH5eQT6ScGn" },
{ title: "Folge 24 - Die Zauberkugel", id: "1jnnbS0Q6DAkqfqegoL-BXoaviMUav-Gn" },
{ title: "Folge 25 - Die Mondfinsternis", id: "1TsEIBykKzGt1MaoeH4Tcz9QYyx7vEAuA" },
{ title: "Folge 26 - Für immer Jade", id: "1qQlyuxmGQ7kyva1ECPaSH6ES-WiAvfKf" },
],

2:[
{ title: "Folge 01 - Alles auf Anfang", id: "1vz3jZj_l7tPEP8JC_vxlwcMMvOXnYB7E" },
{ title: "Folge 02 - Eine klebrige Angelegenheit", id: "1HHgpPz4ml1KoGy4wgP1Lm3MSqL2Xx1D-" },
{ title: "Folge 03 - Postkarte mit Folgen", id: "1V-NouDlRHqkJLOBPxOKrgZTpKKRRXKKD" },
{ title: "Folge 04 - Armor of Darkness", id: "1Tg5l1eXrr2DnWq5RktDQjEr5inCsWHAP" },
{ title: "Folge 05 - Die Langlebigkeitsnudeln", id: "1scVFq8F7RVWejtPB90OGTBbxb1-tWJoe" },
{ title: "Folge 06 - Splitter-Drama", id: "1yp3LW9g2hL5tQ7O1JkgvBEjy4JDLjQzq" },
{ title: "Folge 07 - Ein gigantischer Kampf", id: "1WaBmIhLPph5FZzMbJwB5dzAkJ4T2u8g7" },
{ title: "Folge 08 - Zu viele Jades", id: "1kGPi9J7DHG1e07JurRMcYecAFCXOcKw9" },
{ title: "Folge 09 - Die Diagnose", id: "1yyUgidO2JEmcPbULrlNdd_o0wZkM2flp" },
{ title: "Folge 10 - Mein Freund, die Bestie", id: "1IZfdKVeMBXroS_4twnje6npiiFTgZKFs" },
{ title: "Folge 11 - Die Auktion", id: "1nWtCoO8McD6CFehqEoAeLhc6pvLQ-WfO" },
{ title: "Folge 12 - Eine clevere Füchsin", id: "15mcCv8MS6_L3rSjDMjhKAD0A-auFThqe" },
{ title: "Folge 13 - Jade-Alarm", id: "1PvCQ1WDgGQ6g2Z0SxfZuA8gRTjvY96bo" },
]


}},

serie8: {
    name: "KPop Demon Hunters",
    staffeln: {
      1: [
        { title: "KPoP Demon Hunters", id: "1D0GjZIRlm59AuJeQG0vFJM1qgA9hJX_C" }
      ]
    }
  },



};


 







let currentSeries=null;
let currentSeason=1;
let currentEpisodeIndex=0;
let progress=JSON.parse(localStorage.getItem('progress')||'{}');
let lastSeenOrder=JSON.parse(localStorage.getItem('lastSeen')||'[]');

function saveProgress(){localStorage.setItem('progress',JSON.stringify(progress));}
function saveLastSeen(){localStorage.setItem('lastSeen',JSON.stringify(lastSeenOrder));}

// ====== ZU LETZT GESEHEN ======
function renderLastSeen(){
  const container=document.getElementById("lastSeenList");
  container.innerHTML="";
  lastSeenOrder.forEach(ep=>{
    const div=document.createElement("div");
    div.className="last-card";
    div.innerText=`${ep.serie} - ${ep.title}`;
    div.onclick=()=>{
      currentSeries=ep.serieKey;
      currentSeason=ep.season;
      currentEpisodeIndex=ep.index;
      playEpisode(ep.id);
    };
    container.appendChild(div);
  });
}

// ====== SERIEN RENDER ======
function renderSeries(filter=null){
  const seriesDiv=document.getElementById("series");
  seriesDiv.innerHTML="";
  Object.keys(data).forEach(key=>{
    const serie=data[key];
    if(filter && !filter.includes(key)) return;
    const total=Object.values(serie.staffeln).flat().length;
    const seen=Object.values(serie.staffeln).flat().filter(ep=>progress[ep.id]).length;
    const div=document.createElement("div");
    div.className="card";
    div.innerHTML=`<h3>${serie.name}</h3>
      <div class="progress"><div class="progress-fill" style="width:${(seen/total)*100}%"></div></div>
      <p>Staffeln: ${Object.keys(serie.staffeln).length}</p>`;
    div.onclick=()=>openSeries(key);
    seriesDiv.appendChild(div);
  });
}

// ====== STAFFEL + FOLGEN ======
function openSeries(key){
  currentSeries=key;
  document.getElementById("series").classList.add("hidden");
  document.getElementById("episodes").classList.remove("hidden");
  renderEpisodes();
}

function renderEpisodes(){
  const container=document.getElementById("seasonContainer");
  container.innerHTML="";
  const seasons=data[currentSeries].staffeln;

  Object.keys(seasons).forEach(season=>{
    const seasonCard=document.createElement("div");
    seasonCard.className="season-card card";
    seasonCard.innerHTML=`<h3>Staffel ${season}</h3>`;
    container.appendChild(seasonCard);

    const epsList=document.createElement("div");
    epsList.className="episode-list";

    seasons[season].forEach((ep,i)=>{
      const epDiv=document.createElement("div");
      epDiv.className="episode-card";
      epDiv.innerText=ep.title;
      epDiv.onclick=()=>{
        currentSeason=parseInt(season);
        currentEpisodeIndex=i;
        playEpisode(ep.id);
      };
      epsList.appendChild(epDiv);
    });

    container.appendChild(epsList);
  });
  // Automatisch letzte Folge auswählen
  autoSelectLastEpisode();
}

// ====== PLAYER ======
function playEpisode(id){
  document.getElementById("playerOverlay").style.display="flex";
  document.getElementById("videoPlayer").src=`https://drive.google.com/file/d/${id}/preview`;
  progress[id]=true;
  saveProgress();

  // Update Last Seen
  const epData={serie:data[currentSeries].name,title:Object.values(data[currentSeries].staffeln)[currentSeason-1][currentEpisodeIndex].title,id:id,serieKey:currentSeries,season:currentSeason,index:currentEpisodeIndex};
  lastSeenOrder=lastSeenOrder.filter(e=>e.id!==id);
  lastSeenOrder.unshift(epData);
  if(lastSeenOrder.length>5) lastSeenOrder.pop();
  saveLastSeen();
  renderLastSeen();
}

// Automatische Auswahl der letzten Folge
function autoSelectLastEpisode(){
  const last=lastSeenOrder.find(e=>e.serieKey===currentSeries);
  if(last){
    currentSeason=last.season;
    currentEpisodeIndex=last.index;
  } else {
    currentSeason=1;
    currentEpisodeIndex=0;
  }
}

// Nächste Folge Autoplay
function nextEpisode(){
  const eps=Object.values(data[currentSeries].staffeln)[currentSeason-1];
  currentEpisodeIndex++;
  if(currentEpisodeIndex>=eps.length){
    // Gehe zur nächsten Staffel, falls möglich
    const seasons=Object.keys(data[currentSeries].staffeln);
    const nextSeasonIndex=seasons.indexOf(String(currentSeason))+1;
    if(nextSeasonIndex<seasons.length){
      currentSeason=parseInt(seasons[nextSeasonIndex]);
      currentEpisodeIndex=0;
    } else {
      alert("Keine weiteren Folgen!");
      return;
    }
  }
  playEpisode(Object.values(data[currentSeries].staffeln)[currentSeason-1][currentEpisodeIndex].id);
}

function closePlayer(){document.getElementById("playerOverlay").style.display="none";}
function backToSeries(){
  document.getElementById("episodes").classList.add("hidden");
  document.getElementById("series").classList.remove("hidden");
  renderSeries();
}

// ====== FUZZY SEARCH ======
function levenshtein(a,b){
  const dp=Array(a.length+1).fill(null).map(()=>Array(b.length+1).fill(0));
  for(let i=0;i<=a.length;i++)dp[i][0]=i;
  for(let j=0;j<=b.length;j++)dp[0][j]=j;
  for(let i=1;i<=a.length;i++){
    for(let j=1;j<=b.length;j++){
      if(a[i-1]===b[j-1]) dp[i][j]=dp[i-1][j-1];
      else dp[i][j]=1+Math.min(dp[i-1][j],dp[i][j-1],dp[i-1][j-1]);
    }
  }
  return dp[a.length][b.length];
}

function fuzzySearch(query){
  query=query.toLowerCase();
  const results=[];
  Object.keys(data).forEach(key=>{
    const serie=data[key];
    let found=false;
    if(levenshtein(serie.name.toLowerCase(),query)<=2) found=true;
    if(!found) Object.values(serie.staffeln).flat().some(ep=>{if(levenshtein(ep.title.toLowerCase(),query)<=2){found=true;return true;}});
    if(found) results.push(key);
  });
  return results;
}

document.getElementById("searchInput").addEventListener("input",(e)=>{
  const val=e.target.value;
  if(val==="") renderSeries();
  else renderSeries(fuzzySearch(val));
});

// ====== SWIPE NAVIGATION ======
let touchStartX=0,touchEndX=0;
document.addEventListener('touchstart',e=>{touchStartX=e.changedTouches[0].screenX;});
document.addEventListener('touchend',e=>{
  touchEndX=e.changedTouches[0].screenX;
  if(touchEndX<touchStartX-50) nextEpisode();
});

renderSeries();
renderLastSeen();
// ===== LOGIN SYSTEM v0.2.3 (FIX) =====
const allowedEmails = [
  "admin@mail.de",
  "user@mail.de",
"freeaccess",
"lets@archive.de",
"lets@archive.com",
"lets@archive.at",
"LetsArchive.de",
"LetsArchive.com",
"LetsArchive.at",
"airdream09.github.io/LetsArchive",
"jonassmalle@gmail.com"
];

let ACTIVE_PROFILE_KEY = null;

function login(){
  const email = document.getElementById("loginEmail").value.trim().toLowerCase();
  const error = document.getElementById("loginError");

  if(!allowedEmails.includes(email)){
    error.style.display = "block";
    return;
  }

  error.style.display = "none";
  localStorage.setItem("letsarchive_active_profile", email);
  ACTIVE_PROFILE_KEY = "letsarchive_profile_" + email;

  if(!localStorage.getItem(ACTIVE_PROFILE_KEY)){
    localStorage.setItem(ACTIVE_PROFILE_KEY, JSON.stringify({
      progress:{},
      lastSeen:[]
    }));
  }

  document.getElementById("loginScreen").style.display = "none";
}

function checkLogin(){
  const email = localStorage.getItem("letsarchive_active_profile");
  if(!email){
    document.getElementById("loginScreen").style.display = "flex";
    return;
  }

  ACTIVE_PROFILE_KEY = "letsarchive_profile_" + email;
  document.getElementById("loginScreen").style.display = "none";
}

function logout(){
  localStorage.removeItem("letsarchive_active_profile");
  location.reload();
}

checkLogin();
</script>






</body>
</html>

